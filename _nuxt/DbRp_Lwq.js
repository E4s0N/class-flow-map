import{_ as R}from"./Cject8uT.js";import{i as W,j as n,k as A,f as F,g as G,h as H,o as m,w as J,a as o,c as p,l as K,F as $,m as E,n as O,t as q,d as Q,v as X,p as V,_ as Y}from"./B4cwUIty.js";const Z={class:"album-container"},ee={class:"image-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8"},te=["src","alt","onClick"],oe={class:"video-section mt-10"},se=["onMouseenter","onMouseleave"],le={class:"text-white p-2"},ae=["poster","onPlay","onPause","onEnded","onTimeupdate"],ne=["src"],re=["onClick"],ce=["src","alt"],ue=W({__name:"album",setup(ie){const r=n([{src:"/photo/分宜中学2014届高三1班师生合影留念.jpg",alt:"分宜中学2014届高三1班师生合影留念"},{src:"/photo/2013-元旦-合影.JPG",alt:"2013-元旦-合影.JPG"},{src:"/photo/2012-12-31-坟墓山.jpg",alt:"2012-12-31-坟墓山.jpg"},{src:"/video/2011-元旦-合唱.mp4",alt:"2011-元旦-合唱.mp4"},{src:"/video/2012-刀哥-小松-骑马舞.mp4",alt:"2012-刀哥-小松-骑马舞.mp4"},{src:"/video/2013-刀哥-狐狸叫.mp4",alt:"2013-刀哥-狐狸叫.mp4"}]),b=n([]),c=n([]),u=n([]),f=n([]),h=n([]),_=n([]),j=A(()=>r.value.filter(e=>i(e.src))),i=e=>e.endsWith(".mp4")||e.endsWith(".mov")||e.endsWith(".avi"),L=e=>(e.split("/").pop()||"").replace(/\.[^/.]+$/,""),x=(e,t)=>{e&&(b.value[t]=e,c.value[t]=!1,u.value[t]=!0,h.value[t]=!1,_.value[t]=Date.now())},I=e=>{c.value[e]=!0,h.value[e]=!1,y(e)},S=e=>{c.value[e]=!1,k(e)},B=e=>{c.value[e]=!1,h.value[e]=!0,u.value[e]=!0},M=e=>{_.value[e]=Date.now(),c.value[e]&&u.value[e]&&y(e)},y=e=>{k(e),f.value[e]=setTimeout(()=>{u.value[e]=!1},2e3)},k=e=>{f.value[e]&&(clearTimeout(f.value[e]),f.value[e]=void 0)},U=e=>{const t=b.value[e];t&&(t.paused?t.play():t.pause())},D=e=>h.value[e]||u.value[e]?!0:c.value[e]?Date.now()-_.value[e]<2500:!c.value[e],N=e=>{let t=0;for(let d=0;d<r.value.length;d++)if(!i(r.value[d].src)){if(t===e)return d;t++}return 0},g=n(!1),v=n(0),z=e=>{v.value=e,g.value=!0,document.body.style.overflow="hidden"},w=()=>{g.value=!1,document.body.style.overflow="auto"},C=()=>{const e=r.value.filter(t=>!i(t.src)).length;v.value=(v.value-1+e)%e},T=()=>{const e=r.value.filter(t=>!i(t.src)).length;v.value=(v.value+1)%e},P=e=>{g.value&&(e.key==="Escape"?w():e.key==="ArrowLeft"?C():e.key==="ArrowRight"&&T())};return F(()=>{window.addEventListener("keydown",P)}),G(()=>{window.removeEventListener("keydown",P),f.value.forEach(e=>{e&&clearTimeout(e)})}),(e,t)=>{const d=R;return m(),H(d,{ui:{container:"gap-0 sm:gap-0 py-4 sm:py-6 lg:py-8",title:"text-2xl sm:text-3xl"}},{default:J(()=>[o("div",Z,[t[2]||(t[2]=o("h2",{class:"text-2xl font-bold mb-6 text-center"}," 分宜中学2014届高三1班相册 ",-1)),o("div",ee,[(m(!0),p($,null,E(r.value.filter(l=>!i(l.src)),(l,s)=>(m(),p("div",{key:s,class:"image-item overflow-hidden rounded-lg shadow-md hover:shadow-xl transition-shadow"},[o("img",{src:l.src,alt:l.alt,class:"w-full h-64 object-cover cursor-pointer",onClick:a=>z(N(s))},null,8,te)]))),128))]),o("div",oe,[t[1]||(t[1]=o("h3",{class:"text-xl font-semibold mb-4"}," 纪念视频 ",-1)),(m(!0),p($,null,E(j.value,(l,s)=>(m(),p("div",{key:s,class:"video-container bg-black rounded-lg overflow-hidden mb-6 relative",onMouseenter:a=>u.value[s]=!0,onMouseleave:a=>u.value[s]=!1},[o("h4",le,q(L(l.src)),1),o("video",{ref_for:!0,ref:a=>x(a,s),controls:"",class:"w-full h-auto",poster:l.poster,onPlay:a=>I(s),onPause:a=>S(s),onEnded:a=>B(s),onTimeupdate:a=>M(s)},[o("source",{src:l.src,type:"video/mp4"},null,8,ne),t[0]||(t[0]=Q(" 您的浏览器不支持视频播放。 "))],40,ae),O(o("div",{class:"custom-play-button absolute inset-0 flex items-center justify-center",onClick:a=>U(s)},null,8,re),[[X,D(s)]])],40,se))),128))])]),g.value?(m(),p("div",{key:0,class:"lightbox fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:w},[o("button",{class:"absolute top-4 right-4 text-white text-3xl z-10",onClick:w}," × "),o("img",{src:r.value.filter(l=>!i(l.src))[v.value].src,alt:r.value.filter(l=>!i(l.src))[v.value].alt,class:"max-w-full max-h-full object-contain"},null,8,ce),o("button",{class:"absolute left-4 text-white text-3xl z-10",onClick:V(C,["stop"])}," ‹ "),o("button",{class:"absolute right-4 text-white text-3xl z-10",onClick:V(T,["stop"])}," › ")])):K("",!0)]),_:1})}}}),me=Y(ue,[["__scopeId","data-v-bd15c21a"]]);export{me as default};
